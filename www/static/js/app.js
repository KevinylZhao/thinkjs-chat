!function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],d=0,p=[];d<c.length;d++)o=c[d],i[o]&&p.push(i[o][0]),i[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(u&&u(e);p.length;)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={0:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/js/";var c=window.webpackJsonp=window.webpackJsonp||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;s.push(["J0Gb",1]),n()}({"+zg3":function(t,e,n){"use strict";var a=n("icdg");n.n(a).a},GW0i:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"html[data-v-b2067c42],\nbody[data-v-b2067c42] {\n  height: 100%;\n  width: 100%;\n}\n.content[data-v-b2067c42] {\n  width: 500px;\n  height: 500px;\n  margin: 0 auto;\n  border: 1px solid gray;\n  display: flex;\n  align-items: center;\n}\n.nickname[data-v-b2067c42] {\n  flex: 1;\n}\n.nickname-input[data-v-b2067c42] {\n    width: 100%;\n    box-sizing: border-box;\n    display: inline-block;\n    height: 50px;\n    font-size: 32px;\n    padding: 4px 6px;\n    text-align: center;\n    border: 0;\n    outline: none;\n}\n.nickname-input[data-v-b2067c42]:focus {\n      border: 0;\n}\n.chat[data-v-b2067c42] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid gray;\n}\n.chat-box[data-v-b2067c42] {\n    flex: 1;\n    overflow-y: auto;\n}\n.chat-box .enter-tip[data-v-b2067c42] {\n      text-align: center;\n      display: block;\n      font-size: 12px;\n      color: #999;\n}\n.chat-box .message[data-v-b2067c42] {\n      text-align: left;\n      margin: 5px 10px;\n      display: block;\n}\n.chat-box .message.me[data-v-b2067c42] {\n        text-align: right;\n}\n.chat-input[data-v-b2067c42] {\n    height: 50px;\n    display: flex;\n    align-items: center;\n}\n.chat-input .input[data-v-b2067c42] {\n      flex: 1;\n}\n.chat-input .send-button[data-v-b2067c42] {\n      width: 100px;\n      margin-left: 10px;\n}\n",""])},J0Gb:function(t,e,n){"use strict";n.r(e);var a=n("Kw5r"),i=n("XJYT"),s=n.n(i),o=(n("D66Q"),n("vDqi")),c=n.n(o),r=n("Qyje"),l=n.n(r);n("8ujH");const u=new c.a.create({baseURL:"/",timeout:3e4});u.interceptors.request.use(t=>(t.data&&"object"==typeof t.data&&"[object Object]"===t.data.toString()&&(t.data=l.a.stringify(t.data)),t.params&&(t.url+=`?${l.a.stringify(t.params)}`,t.params={}),t));var d={name:"Index",data:()=>({receive:"",chatMsg:"",nickname:"",editNickName:!1,showChat:!1,chatData:[]}),mounted(){this.initSocket()},methods:{initSocket(){this.socket=io(),this.socket.on("open",t=>{console.log("open",t),this.receive=t})},initUI(){this.receive="",this.chatMsg="",this.nickname="",this.ditNickName=!1,this.showChat=!1,this.chatData=[]},editName(){this.initUI(),this.socket&&(this.socket.emit("close"),this.socket.off("message"),this.socket.off("room"),this.socket.off("close")),this.editNickName=!0,this.$nextTick(()=>{console.log(this.$refs.nicnameInput),this.$refs.nicnameInput.focus()})},toRoom(){this.editNickName=!1,this.showChat=!0,this.socket.emit("room",{nickname:this.nickname}),this.socket.on("message",t=>{this.chatData.push(t),t.id===this.socket.id&&(t.isMe=!0),console.log("--\x3e",t)}),this.socket.on("room",t=>{console.log("room data",t),this.chatData.push(t)}),this.socket.on("close",t=>{console.log("close data",t),this.chatData.push(t)}),console.log("to room",this.nickname)},sendMsg(){if(!this.chatMsg)return this.$message.error("发送内容为空");this.socket.emit("message",{message:this.chatMsg,nickname:this.nickname}),this.chatMsg=""}}},p=(n("+zg3"),n("KHd+")),h=Object(p.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:t.editName}},[t._v("进入聊天室")]),t._v(" "),n("div",{staticClass:"content"},[t.editNickName?n("div",{staticClass:"nickname"},[n("div",{staticClass:"nickname-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],ref:"nicnameInput",staticClass:"nickname-input",attrs:{placeholder:"请输入您的昵称",type:"text"},domProps:{value:t.nickname},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toRoom(e)},input:function(e){e.target.composing||(t.nickname=e.target.value)}}})])]):t._e(),t._v(" "),t.showChat?n("div",{staticClass:"chat"},[n("div",{staticClass:"chat-box"},t._l(t.chatData,function(e,a){return n("div",{key:a},["in"==e.type?n("p",{staticClass:"enter-tip"},[t._v(t._s(e.nickname)+"进入聊天室")]):t._e(),t._v(" "),"out"==e.type?n("p",{staticClass:"enter-tip"},[t._v(t._s(e.nickname)+"离开聊天室")]):"message"==e.type?n("p",{class:["message",{me:e.isMe}]},[e.isMe?t._e():n("span",{staticStyle:{color:"red"}},[t._v(t._s(e.nickname)+":")]),t._v(" "),n("span",[t._v(t._s(e.message))]),t._v(" "),e.isMe?n("span",{staticStyle:{color:"red"}},[t._v(":"+t._s(e.nickname))]):t._e()]):t._e()])}),0),t._v(" "),n("div",{staticClass:"chat-input"},[n("el-input",{staticClass:"input",model:{value:t.chatMsg,callback:function(e){t.chatMsg=e},expression:"chatMsg"}}),t._v(" "),n("el-button",{staticClass:"send-button",on:{click:t.sendMsg},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMsg(e)}}},[t._v("发送")])],1)]):t._e()])],1)},[],!1,null,"b2067c42",null).exports;a.default.config.productionTip=!1,a.default.use(s.a),new a.default({el:"#app",data:{message:"hello world"},render:t=>t(h)})},icdg:function(t,e,n){var a=n("GW0i");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("SZ7m").default)("c68168e6",a,!0,{})}});